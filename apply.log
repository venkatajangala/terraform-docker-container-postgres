[0m[1mdocker_volume.etcd_data: Refreshing state... [id=etcd-data][0m
[0m[1mdocker_volume.pgbackrest_repo: Refreshing state... [id=pgbackrest-repo][0m
[0m[1mdocker_volume.pg_node_3_data: Refreshing state... [id=pg-node-3-data][0m
[0m[1mdocker_volume.pg_node_1_data: Refreshing state... [id=pg-node-1-data][0m
[0m[1mdocker_network.pg_ha_network: Refreshing state... [id=e0dd0d4f947d80308105a5bbf3ae880cc9777136af2a6577f25cd8c1f7fb4f88][0m
[0m[1mdocker_image.dbhub: Refreshing state... [id=sha256:ba2d60622dfd82513a350ab28ce52df36ba96b84e929414604498a577f7f7042bytebase/bytebase:latest][0m
[0m[1mdocker_volume.pg_node_2_data: Refreshing state... [id=pg-node-2-data][0m
[0m[1mdocker_image.etcd: Refreshing state... [id=sha256:28759af54acd6924b2191dc1a1d096e2fa2e219717a21b9d8edf89717db3631bquay.io/coreos/etcd:v3.5.0][0m
[0m[1mdocker_container.etcd: Refreshing state... [id=3b329bcd212a654e08569539ba728b6bf418d0341479f4481855a77d9f92cb7d][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # docker_container.dbhub[0m will be created
[0m  [32m+[0m[0m resource "docker_container" "dbhub" {
      [32m+[0m[0m attach                                      = false
      [32m+[0m[0m bridge                                      = (known after apply)
      [32m+[0m[0m command                                     = (known after apply)
      [32m+[0m[0m container_logs                              = (known after apply)
      [32m+[0m[0m container_read_refresh_timeout_milliseconds = 15000
      [32m+[0m[0m entrypoint                                  = (known after apply)
      [32m+[0m[0m env                                         = (sensitive value)
      [32m+[0m[0m exit_code                                   = (known after apply)
      [32m+[0m[0m hostname                                    = (known after apply)
      [32m+[0m[0m id                                          = (known after apply)
      [32m+[0m[0m image                                       = "sha256:ba2d60622dfd82513a350ab28ce52df36ba96b84e929414604498a577f7f7042"
      [32m+[0m[0m init                                        = (known after apply)
      [32m+[0m[0m ipc_mode                                    = (known after apply)
      [32m+[0m[0m log_driver                                  = (known after apply)
      [32m+[0m[0m logs                                        = false
      [32m+[0m[0m must_run                                    = true
      [32m+[0m[0m name                                        = "dbhub"
      [32m+[0m[0m network_data                                = (known after apply)
      [32m+[0m[0m network_mode                                = "bridge"
      [32m+[0m[0m read_only                                   = false
      [32m+[0m[0m remove_volumes                              = true
      [32m+[0m[0m restart                                     = "unless-stopped"
      [32m+[0m[0m rm                                          = false
      [32m+[0m[0m runtime                                     = (known after apply)
      [32m+[0m[0m security_opts                               = (known after apply)
      [32m+[0m[0m shm_size                                    = (known after apply)
      [32m+[0m[0m start                                       = true
      [32m+[0m[0m stdin_open                                  = false
      [32m+[0m[0m stop_signal                                 = (known after apply)
      [32m+[0m[0m stop_timeout                                = (known after apply)
      [32m+[0m[0m tty                                         = false
      [32m+[0m[0m wait                                        = false
      [32m+[0m[0m wait_timeout                                = 60

      [32m+[0m[0m healthcheck (known after apply)

      [32m+[0m[0m labels (known after apply)

      [32m+[0m[0m networks_advanced {
          [32m+[0m[0m aliases      = []
          [32m+[0m[0m name         = "pg-ha-network"
            [90m# (2 unchanged attributes hidden)[0m[0m
        }

      [32m+[0m[0m ports {
          [32m+[0m[0m external = 9090
          [32m+[0m[0m internal = 8080
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
    }

[1m  # docker_container.etcd[0m will be created
[0m  [32m+[0m[0m resource "docker_container" "etcd" {
      [32m+[0m[0m attach                                      = false
      [32m+[0m[0m bridge                                      = (known after apply)
      [32m+[0m[0m command                                     = (known after apply)
      [32m+[0m[0m container_logs                              = (known after apply)
      [32m+[0m[0m container_read_refresh_timeout_milliseconds = 15000
      [32m+[0m[0m entrypoint                                  = (known after apply)
      [32m+[0m[0m env                                         = [
          [32m+[0m[0m "ETCD_ADVERTISE_CLIENT_URLS=http://etcd:2379",
          [32m+[0m[0m "ETCD_CLUSTER_STATE=new",
          [32m+[0m[0m "ETCD_INITIAL_ADVERTISE_PEER_URLS=http://etcd:2380",
          [32m+[0m[0m "ETCD_INITIAL_CLUSTER=etcd=http://etcd:2380",
          [32m+[0m[0m "ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379",
          [32m+[0m[0m "ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380",
          [32m+[0m[0m "ETCD_NAME=etcd",
        ]
      [32m+[0m[0m exit_code                                   = (known after apply)
      [32m+[0m[0m hostname                                    = (known after apply)
      [32m+[0m[0m id                                          = (known after apply)
      [32m+[0m[0m image                                       = "sha256:28759af54acd6924b2191dc1a1d096e2fa2e219717a21b9d8edf89717db3631b"
      [32m+[0m[0m init                                        = (known after apply)
      [32m+[0m[0m ipc_mode                                    = (known after apply)
      [32m+[0m[0m log_driver                                  = (known after apply)
      [32m+[0m[0m logs                                        = false
      [32m+[0m[0m must_run                                    = true
      [32m+[0m[0m name                                        = "etcd"
      [32m+[0m[0m network_data                                = (known after apply)
      [32m+[0m[0m network_mode                                = "bridge"
      [32m+[0m[0m read_only                                   = false
      [32m+[0m[0m remove_volumes                              = true
      [32m+[0m[0m restart                                     = "unless-stopped"
      [32m+[0m[0m rm                                          = false
      [32m+[0m[0m runtime                                     = (known after apply)
      [32m+[0m[0m security_opts                               = (known after apply)
      [32m+[0m[0m shm_size                                    = (known after apply)
      [32m+[0m[0m start                                       = true
      [32m+[0m[0m stdin_open                                  = false
      [32m+[0m[0m stop_signal                                 = (known after apply)
      [32m+[0m[0m stop_timeout                                = (known after apply)
      [32m+[0m[0m tty                                         = false
      [32m+[0m[0m wait                                        = false
      [32m+[0m[0m wait_timeout                                = 60

      [32m+[0m[0m healthcheck (known after apply)

      [32m+[0m[0m labels (known after apply)

      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "etcd-data"
          [32m+[0m[0m target = "/etcd-data"
          [32m+[0m[0m type   = "volume"
        }

      [32m+[0m[0m networks_advanced {
          [32m+[0m[0m aliases      = []
          [32m+[0m[0m name         = "pg-ha-network"
            [90m# (2 unchanged attributes hidden)[0m[0m
        }

      [32m+[0m[0m ports {
          [32m+[0m[0m external = 2379
          [32m+[0m[0m internal = 2379
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
      [32m+[0m[0m ports {
          [32m+[0m[0m external = 2380
          [32m+[0m[0m internal = 2380
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
    }

[1m  # docker_container.pg_node_1[0m will be created
[0m  [32m+[0m[0m resource "docker_container" "pg_node_1" {
      [32m+[0m[0m attach                                      = false
      [32m+[0m[0m bridge                                      = (known after apply)
      [32m+[0m[0m command                                     = (known after apply)
      [32m+[0m[0m container_logs                              = (known after apply)
      [32m+[0m[0m container_read_refresh_timeout_milliseconds = 15000
      [32m+[0m[0m entrypoint                                  = (known after apply)
      [32m+[0m[0m env                                         = (sensitive value)
      [32m+[0m[0m exit_code                                   = (known after apply)
      [32m+[0m[0m hostname                                    = (known after apply)
      [32m+[0m[0m id                                          = (known after apply)
      [32m+[0m[0m image                                       = (known after apply)
      [32m+[0m[0m init                                        = (known after apply)
      [32m+[0m[0m ipc_mode                                    = (known after apply)
      [32m+[0m[0m log_driver                                  = (known after apply)
      [32m+[0m[0m logs                                        = false
      [32m+[0m[0m must_run                                    = true
      [32m+[0m[0m name                                        = "pg-node-1"
      [32m+[0m[0m network_data                                = (known after apply)
      [32m+[0m[0m network_mode                                = "bridge"
      [32m+[0m[0m read_only                                   = false
      [32m+[0m[0m remove_volumes                              = true
      [32m+[0m[0m restart                                     = "unless-stopped"
      [32m+[0m[0m rm                                          = false
      [32m+[0m[0m runtime                                     = (known after apply)
      [32m+[0m[0m security_opts                               = (known after apply)
      [32m+[0m[0m shm_size                                    = (known after apply)
      [32m+[0m[0m start                                       = true
      [32m+[0m[0m stdin_open                                  = false
      [32m+[0m[0m stop_signal                                 = (known after apply)
      [32m+[0m[0m stop_timeout                                = (known after apply)
      [32m+[0m[0m tty                                         = false
      [32m+[0m[0m wait                                        = false
      [32m+[0m[0m wait_timeout                                = 60

      [32m+[0m[0m healthcheck (known after apply)

      [32m+[0m[0m labels (known after apply)

      [32m+[0m[0m mounts {
          [32m+[0m[0m read_only = true
          [32m+[0m[0m source    = "/home/vejang/terraform-docker-container-postgres/patroni/patroni-node-1.yml"
          [32m+[0m[0m target    = "/etc/patroni/patroni.yml"
          [32m+[0m[0m type      = "bind"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pg-node-1-data"
          [32m+[0m[0m target = "/var/lib/postgresql"
          [32m+[0m[0m type   = "volume"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pgbackrest-repo"
          [32m+[0m[0m target = "/var/lib/pgbackrest"
          [32m+[0m[0m type   = "volume"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pgbackrest-repo"
          [32m+[0m[0m target = "/var/log/pgbackrest"
          [32m+[0m[0m type   = "volume"
        }

      [32m+[0m[0m networks_advanced {
          [32m+[0m[0m aliases      = []
          [32m+[0m[0m name         = "pg-ha-network"
            [90m# (2 unchanged attributes hidden)[0m[0m
        }

      [32m+[0m[0m ports {
          [32m+[0m[0m external = 5432
          [32m+[0m[0m internal = 5432
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
      [32m+[0m[0m ports {
          [32m+[0m[0m external = 8008
          [32m+[0m[0m internal = 8008
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
    }

[1m  # docker_container.pg_node_2[0m will be created
[0m  [32m+[0m[0m resource "docker_container" "pg_node_2" {
      [32m+[0m[0m attach                                      = false
      [32m+[0m[0m bridge                                      = (known after apply)
      [32m+[0m[0m command                                     = (known after apply)
      [32m+[0m[0m container_logs                              = (known after apply)
      [32m+[0m[0m container_read_refresh_timeout_milliseconds = 15000
      [32m+[0m[0m entrypoint                                  = (known after apply)
      [32m+[0m[0m env                                         = (sensitive value)
      [32m+[0m[0m exit_code                                   = (known after apply)
      [32m+[0m[0m hostname                                    = (known after apply)
      [32m+[0m[0m id                                          = (known after apply)
      [32m+[0m[0m image                                       = (known after apply)
      [32m+[0m[0m init                                        = (known after apply)
      [32m+[0m[0m ipc_mode                                    = (known after apply)
      [32m+[0m[0m log_driver                                  = (known after apply)
      [32m+[0m[0m logs                                        = false
      [32m+[0m[0m must_run                                    = true
      [32m+[0m[0m name                                        = "pg-node-2"
      [32m+[0m[0m network_data                                = (known after apply)
      [32m+[0m[0m network_mode                                = "bridge"
      [32m+[0m[0m read_only                                   = false
      [32m+[0m[0m remove_volumes                              = true
      [32m+[0m[0m restart                                     = "unless-stopped"
      [32m+[0m[0m rm                                          = false
      [32m+[0m[0m runtime                                     = (known after apply)
      [32m+[0m[0m security_opts                               = (known after apply)
      [32m+[0m[0m shm_size                                    = (known after apply)
      [32m+[0m[0m start                                       = true
      [32m+[0m[0m stdin_open                                  = false
      [32m+[0m[0m stop_signal                                 = (known after apply)
      [32m+[0m[0m stop_timeout                                = (known after apply)
      [32m+[0m[0m tty                                         = false
      [32m+[0m[0m wait                                        = false
      [32m+[0m[0m wait_timeout                                = 60

      [32m+[0m[0m healthcheck (known after apply)

      [32m+[0m[0m labels (known after apply)

      [32m+[0m[0m mounts {
          [32m+[0m[0m read_only = true
          [32m+[0m[0m source    = "/home/vejang/terraform-docker-container-postgres/patroni/patroni-node-2.yml"
          [32m+[0m[0m target    = "/etc/patroni/patroni.yml"
          [32m+[0m[0m type      = "bind"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pg-node-2-data"
          [32m+[0m[0m target = "/var/lib/postgresql"
          [32m+[0m[0m type   = "volume"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pgbackrest-repo"
          [32m+[0m[0m target = "/var/lib/pgbackrest"
          [32m+[0m[0m type   = "volume"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pgbackrest-repo"
          [32m+[0m[0m target = "/var/log/pgbackrest"
          [32m+[0m[0m type   = "volume"
        }

      [32m+[0m[0m networks_advanced {
          [32m+[0m[0m aliases      = []
          [32m+[0m[0m name         = "pg-ha-network"
            [90m# (2 unchanged attributes hidden)[0m[0m
        }

      [32m+[0m[0m ports {
          [32m+[0m[0m external = 5433
          [32m+[0m[0m internal = 5432
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
      [32m+[0m[0m ports {
          [32m+[0m[0m external = 8009
          [32m+[0m[0m internal = 8008
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
    }

[1m  # docker_container.pg_node_3[0m will be created
[0m  [32m+[0m[0m resource "docker_container" "pg_node_3" {
      [32m+[0m[0m attach                                      = false
      [32m+[0m[0m bridge                                      = (known after apply)
      [32m+[0m[0m command                                     = (known after apply)
      [32m+[0m[0m container_logs                              = (known after apply)
      [32m+[0m[0m container_read_refresh_timeout_milliseconds = 15000
      [32m+[0m[0m entrypoint                                  = (known after apply)
      [32m+[0m[0m env                                         = (sensitive value)
      [32m+[0m[0m exit_code                                   = (known after apply)
      [32m+[0m[0m hostname                                    = (known after apply)
      [32m+[0m[0m id                                          = (known after apply)
      [32m+[0m[0m image                                       = (known after apply)
      [32m+[0m[0m init                                        = (known after apply)
      [32m+[0m[0m ipc_mode                                    = (known after apply)
      [32m+[0m[0m log_driver                                  = (known after apply)
      [32m+[0m[0m logs                                        = false
      [32m+[0m[0m must_run                                    = true
      [32m+[0m[0m name                                        = "pg-node-3"
      [32m+[0m[0m network_data                                = (known after apply)
      [32m+[0m[0m network_mode                                = "bridge"
      [32m+[0m[0m read_only                                   = false
      [32m+[0m[0m remove_volumes                              = true
      [32m+[0m[0m restart                                     = "unless-stopped"
      [32m+[0m[0m rm                                          = false
      [32m+[0m[0m runtime                                     = (known after apply)
      [32m+[0m[0m security_opts                               = (known after apply)
      [32m+[0m[0m shm_size                                    = (known after apply)
      [32m+[0m[0m start                                       = true
      [32m+[0m[0m stdin_open                                  = false
      [32m+[0m[0m stop_signal                                 = (known after apply)
      [32m+[0m[0m stop_timeout                                = (known after apply)
      [32m+[0m[0m tty                                         = false
      [32m+[0m[0m wait                                        = false
      [32m+[0m[0m wait_timeout                                = 60

      [32m+[0m[0m healthcheck (known after apply)

      [32m+[0m[0m labels (known after apply)

      [32m+[0m[0m mounts {
          [32m+[0m[0m read_only = true
          [32m+[0m[0m source    = "/home/vejang/terraform-docker-container-postgres/patroni/patroni-node-3.yml"
          [32m+[0m[0m target    = "/etc/patroni/patroni.yml"
          [32m+[0m[0m type      = "bind"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pg-node-3-data"
          [32m+[0m[0m target = "/var/lib/postgresql"
          [32m+[0m[0m type   = "volume"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pgbackrest-repo"
          [32m+[0m[0m target = "/var/lib/pgbackrest"
          [32m+[0m[0m type   = "volume"
        }
      [32m+[0m[0m mounts {
          [32m+[0m[0m source = "pgbackrest-repo"
          [32m+[0m[0m target = "/var/log/pgbackrest"
          [32m+[0m[0m type   = "volume"
        }

      [32m+[0m[0m networks_advanced {
          [32m+[0m[0m aliases      = []
          [32m+[0m[0m name         = "pg-ha-network"
            [90m# (2 unchanged attributes hidden)[0m[0m
        }

      [32m+[0m[0m ports {
          [32m+[0m[0m external = 5434
          [32m+[0m[0m internal = 5432
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
      [32m+[0m[0m ports {
          [32m+[0m[0m external = 8010
          [32m+[0m[0m internal = 8008
          [32m+[0m[0m ip       = "0.0.0.0"
          [32m+[0m[0m protocol = "tcp"
        }
    }

[1m  # docker_image.postgres_patroni[0m will be created
[0m  [32m+[0m[0m resource "docker_image" "postgres_patroni" {
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m image_id    = (known after apply)
      [32m+[0m[0m name        = "postgres-patroni:18-pgvector"
      [32m+[0m[0m repo_digest = (known after apply)

      [32m+[0m[0m build {
          [32m+[0m[0m cache_from     = []
          [32m+[0m[0m context        = "."
          [32m+[0m[0m dockerfile     = "Dockerfile.patroni"
          [32m+[0m[0m extra_hosts    = []
          [32m+[0m[0m remove         = true
          [32m+[0m[0m security_opt   = []
          [32m+[0m[0m tag            = []
            [90m# (13 unchanged attributes hidden)[0m[0m
        }
    }

[1mPlan:[0m [0m6 to add, 0 to change, 0 to destroy.
[0m[1mdocker_image.postgres_patroni: Creating...[0m[0m
[0m[1mdocker_container.etcd: Creating...[0m[0m
[0m[1mdocker_image.postgres_patroni: Still creating... [00m10s elapsed][0m[0m
[0m[1mdocker_image.postgres_patroni: Still creating... [00m20s elapsed][0m[0m
[0m[1mdocker_image.postgres_patroni: Creation complete after 25s [id=sha256:ecce30d536761a87c98944b565904da70099533fc4eaa35b90835aa8d8d2f865postgres-patroni:18-pgvector][0m
[31mâ•·[0m[0m
[31mâ”‚[0m [0m[1m[31mError: [0m[0m[1mUnable to start container: Error response from daemon: failed to set up container networking: driver failed programming external connectivity on endpoint etcd (78b6589ae3f62d8c7d7c4b31455f989a6f1d435337bb90085a824b642e2ccc8c): failed to bind host port 0.0.0.0:2379/tcp: address already in use[0m
[31mâ”‚[0m [0m
[31mâ”‚[0m [0m[0m  with docker_container.etcd,
[31mâ”‚[0m [0m  on main-ha.tf line 34, in resource "docker_container" "etcd":
[31mâ”‚[0m [0m  34: resource "docker_container" "etcd" [4m{[0m[0m
[31mâ”‚[0m [0m
[31mâ•µ[0m[0m
